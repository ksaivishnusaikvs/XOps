{
  "widgets": [
    {
      "type": "metric",
      "x": 0,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/ApplicationELB",
            "TargetResponseTime",
            {
              "stat": "Average",
              "label": "Avg Response Time"
            }
          ],
          [
            "...",
            {
              "stat": "p99",
              "label": "P99 Response Time"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "ALB Response Time",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Seconds",
            "showUnits": false
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "SLA Target: 200ms",
              "value": 0.2
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/ApplicationELB",
            "RequestCount",
            {
              "stat": "Sum",
              "label": "Total Requests"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "ALB Request Count",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count",
            "showUnits": false
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 6,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/ApplicationELB",
            "HTTPCode_Target_2XX_Count",
            {
              "stat": "Sum",
              "label": "2xx Success",
              "color": "#2ca02c"
            }
          ],
          [
            ".",
            "HTTPCode_Target_4XX_Count",
            {
              "stat": "Sum",
              "label": "4xx Client Errors",
              "color": "#ff7f0e"
            }
          ],
          [
            ".",
            "HTTPCode_Target_5XX_Count",
            {
              "stat": "Sum",
              "label": "5xx Server Errors",
              "color": "#d62728"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "us-east-1",
        "title": "HTTP Status Codes",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 6,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/ApplicationELB",
            "HealthyHostCount",
            {
              "stat": "Average",
              "label": "Healthy Targets",
              "color": "#2ca02c"
            }
          ],
          [
            ".",
            "UnHealthyHostCount",
            {
              "stat": "Average",
              "label": "Unhealthy Targets",
              "color": "#d62728"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Target Health",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 12,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/EC2",
            "CPUUtilization",
            {
              "stat": "Average"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "EC2 CPU Utilization",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Percent",
            "min": 0,
            "max": 100
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Scale Out Threshold: 70%",
              "value": 70,
              "color": "#ff7f0e"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 12,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/AutoScaling",
            "GroupDesiredCapacity",
            {
              "stat": "Average",
              "label": "Desired Capacity"
            }
          ],
          [
            ".",
            "GroupInServiceInstances",
            {
              "stat": "Average",
              "label": "In-Service Instances"
            }
          ],
          [
            ".",
            "GroupMinSize",
            {
              "stat": "Average",
              "label": "Min Size"
            }
          ],
          [
            ".",
            "GroupMaxSize",
            {
              "stat": "Average",
              "label": "Max Size"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Auto Scaling Group Capacity",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 12,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/EC2",
            "NetworkIn",
            {
              "stat": "Sum",
              "label": "Network In"
            }
          ],
          [
            ".",
            "NetworkOut",
            {
              "stat": "Sum",
              "label": "Network Out"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "EC2 Network Traffic",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/RDS",
            "CPUUtilization",
            {
              "stat": "Average"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "RDS CPU Utilization",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Percent",
            "min": 0,
            "max": 100
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Warning Threshold: 80%",
              "value": 80,
              "color": "#ff7f0e"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/RDS",
            "DatabaseConnections",
            {
              "stat": "Average"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "RDS Database Connections",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 24,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/RDS",
            "ReadLatency",
            {
              "stat": "Average",
              "label": "Read Latency"
            }
          ],
          [
            ".",
            "WriteLatency",
            {
              "stat": "Average",
              "label": "Write Latency"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "RDS Latency",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Seconds"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 24,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/RDS",
            "FreeableMemory",
            {
              "stat": "Average"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "RDS Freeable Memory",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 30,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/Lambda",
            "Invocations",
            {
              "stat": "Sum"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Lambda Invocations",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 30,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/Lambda",
            "Errors",
            {
              "stat": "Sum",
              "label": "Errors",
              "color": "#d62728"
            }
          ],
          [
            ".",
            "Throttles",
            {
              "stat": "Sum",
              "label": "Throttles",
              "color": "#ff7f0e"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "us-east-1",
        "title": "Lambda Errors & Throttles",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 36,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/Lambda",
            "Duration",
            {
              "stat": "Average",
              "label": "Avg Duration"
            }
          ],
          [
            "...",
            {
              "stat": "p99",
              "label": "P99 Duration"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Lambda Duration",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Milliseconds"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 36,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AWS/DynamoDB",
            "UserErrors",
            {
              "stat": "Sum"
            }
          ],
          [
            ".",
            "SystemErrors",
            {
              "stat": "Sum"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "us-east-1",
        "title": "DynamoDB Errors",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Count",
            "min": 0
          }
        }
      }
    },
    {
      "type": "log",
      "x": 0,
      "y": 42,
      "width": 24,
      "height": 6,
      "properties": {
        "query": "SOURCE '/aws/lambda/cost-optimizer'\n| fields @timestamp, @message\n| filter @message like /ERROR/\n| sort @timestamp desc\n| limit 20",
        "region": "us-east-1",
        "stacked": false,
        "title": "Recent Lambda Errors",
        "view": "table"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 48,
      "width": 24,
      "height": 1,
      "properties": {
        "markdown": "# Business Metrics\nCustom application metrics for monitoring business KPIs"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 49,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "CustomMetrics",
            "OrdersCompleted",
            {
              "stat": "Sum",
              "label": "Orders/Minute"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Orders per Minute",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 49,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "CustomMetrics",
            "Revenue",
            {
              "stat": "Sum",
              "label": "Revenue/Minute"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Revenue per Minute",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "USD"
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Target: $1000/min",
              "value": 1000
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 49,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            {
              "expression": "(m2/m1)*100",
              "label": "Cart Abandonment Rate",
              "id": "e1"
            }
          ],
          [
            "CustomMetrics",
            "CartsCreated",
            {
              "stat": "Sum",
              "id": "m1",
              "visible": false
            }
          ],
          [
            ".",
            "OrdersCompleted",
            {
              "stat": "Sum",
              "id": "m2",
              "visible": false
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Cart Abandonment Rate",
        "period": 300,
        "yAxis": {
          "left": {
            "label": "Percent",
            "min": 0,
            "max": 100
          }
        }
      }
    }
  ]
}
